<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Melons Simple Mod Template</title>
    <link rel="stylesheet" type="text/css" href="../wiki.css">
</head>
<body>
    <header>
        <h1>Melons Simple Mod Template</h1>
    </header>
    <section>
        <h2>Step 1: Setting Up the Namespace and Dependencies</h2>
        <p>In your C# script, begin by including the necessary namespaces and dependencies:</p>
        <pre><code class="language-csharp">using BepInEx;
using BoplFixedMath;
using HarmonyLib;
using System.Reflection;
using UnityEngine;</code></pre>
<p>BoplFixedMath is a library used by bopl battle to make the physics deterministic. You will need to do (Fix) whenever you are doing math.</p>

        <h2>Step 2: Creating the Plugin Class</h2>
        <p>Create a class that uses BaseUnityPlugin and give it the BepInPlugin attribute:</p>
        <pre><code class="language-csharp">
namespace ModName
{
    [BepInPlugin("com.YourName.ModName", "ModName", "1.0.0")]
    public class Plugin : BaseUnityPlugin
    {
        private void Awake()
        {
            
        }
    }
}
        </code></pre>
<p>Remeber to replace Yourname and Modname with your name</p>

        <h2>Step 3: Implementing the Awake Method</h2>
        <p>Within the Plugin class, implement the Awake method. This method will be called when the plugin is loaded:</p>
        <pre><code class="language-csharp">private void Awake()
{
    Logger.LogInfo("Plugin ModName is loaded!");

    Harmony harmony = new Harmony("com.YourName.ModName");

    MethodInfo original = AccessTools.Method(typeof(Class), "Awake");
    MethodInfo patch = AccessTools.Method(typeof(myPatches), "Awake_ModName_Plug");
    harmony.Patch(original, new HarmonyMethod(patch));
}</code></pre>
<p>Replace <code>class</code> with your class from DnSpy</p>

        <h2>Step 4: Defining Patch Methods</h2>
        <p>Create a nested class within the Plugin class to define your patch methods:</p>
        <pre><code class="language-csharp">public class myPatches
{
    public static void Awake_Modname_Plug(Class __instance)
    {
        __instance.Property = (Fix)Value;
    }
}</code></pre>
<p>Remember to replace <code>class</code> again and replace <code>Property</code> and <code>value</code> with your property and value from DnSpy</p>
<h2>Step 5: Final plugin</h2>
<p>Your final plugin will look something like this:</p>
<pre><code class="language-csharp">
using BepInEx;
using BoplFixedMath;
using HarmonyLib;
using System.Reflection;
using UnityEngine;

namespace InstantCooldowns
{
    [BepInPlugin("com.Melon.InstantCooldowns", "Instant Cooldowns", "1.0.0")]
    public class Plugin : BaseUnityPlugin
    {
        private void Awake()
        {
            Logger.LogInfo("InstantCooldowns has loaded!");

            Harmony harmony = new Harmony("com.Melon.InstantCooldowns");


            MethodInfo original = AccessTools.Method(typeof(Ability), "Awake");
            MethodInfo patch = AccessTools.Method(typeof(myPatches), "StartInstantCooldowns");
            harmony.Patch(original, new HarmonyMethod(patch));
        }

        public class myPatches
        {
            public static void StartInstantCooldowns(Ability __instance)
            {
                __instance.Cooldown = (Fix)0;
            }
        }
    }
}</code></pre>

        <h2>Summary</h2>
        <p>Congratulations! You've just created a basic mod using C# for Bopl. This tutorial covered setting up namespaces, creating a plugin class, implementing the Awake method, and defining patch methods using Harmony.</p>
    </section>
    <footer>
    </footer>
</body>
</html>
